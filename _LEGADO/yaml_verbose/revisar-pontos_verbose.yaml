# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# WORKFLOW: REVISAR PONTOS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# RevisÃ£o manual assistida por experts em pontos especÃ­ficos
# VersÃ£o: 1.0

id: revisar_pontos
tipo: workflow
versao: "1.0"
coordenadora: charlotte_mason

nome: "Revisar Pontos â€” RevisÃ£o Manual Assistida"
descricao: |
  O Maestro identifica pontos especÃ­ficos a corrigir.
  Experts relevantes dÃ£o parecer embasado.
  CorreÃ§Ãµes aplicadas na FONTE (YAML), depois re-renderizadas.

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ENTENDIMENTO DO PIPELINE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

pipeline_awareness:
  conceito: |
    Existem DOIS MOMENTOS distintos no projeto:
    
    1. FONTE (YAML)
       - Ã‰ o CONTEÃšDO da liÃ§Ã£o
       - Onde os experts revisam e corrigem
       - Onde a qualidade pedagÃ³gica e narrativa estÃ¡
       
    2. OUTPUT (HTML/PDF)
       - Ã‰ a APRESENTAÃ‡ÃƒO visual
       - Gerada pelo Gutenberg a partir do YAML
       - HTML para web, PDF para impressÃ£o
       
  regra_ouro: |
    "Experts revisam a FONTE (YAML).
     A aparÃªncia visual Ã© responsabilidade do Gutenberg (HTML/PDF).
     Se o conteÃºdo estÃ¡ bom no YAML, o HTML e PDF serÃ£o bons automaticamente."
     
  pipeline:
    entrada: "curriculo/[CICLO]/L[XXX].yaml"
    gutenberg_html: "forja-core/pipeline/gutenberg_html.py"
    gutenberg_pdf: "forja-core/pipeline/gutenberg_pdf.py"
    saida_html: "site/[ciclo]/L[XXX].html"
    saida_pdf: "print/[ciclo]/L[XXX].pdf"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# INVOCAÃ‡ÃƒO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

invocacao:
  comando: "/revisar-pontos [ponto1], [ponto2], [ponto3]"
  exemplo: "/revisar-pontos 'tom condescendente', 'tempo longo', 'falta narraÃ§Ã£o'"
  uso: "Executar apÃ³s revisÃ£o automÃ¡tica, quando Maestro identifica pontos"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# MAPEAMENTO PONTO â†’ EXPERT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

mapeamento_experts:
  # Pontos relacionados a TOM
  tom_condescendente:
    experts: [cs_lewis, charlotte_mason]
    dominio: narrativa
    pergunta: "Como reescrever sem infantilizar?"
    
  tom_seco:
    experts: [beatrix_potter, makoto_fujimura]
    dominio: narrativa
    pergunta: "Como adicionar encantamento sem forÃ§ar?"
    
  tom_muito_florido:
    experts: [cs_lewis, jerome_bruner]
    dominio: narrativa
    pergunta: "Como simplificar sem perder beleza?"
    
  # Pontos relacionados a TEMPO
  tempo_longo:
    experts: [charlotte_mason, maes_personas]
    dominio: pedagogia
    pergunta: "Como reduzir para â‰¤20 min (Sementes)?"
    
  tempo_curto:
    experts: [jerome_bruner, lev_vygotsky]
    dominio: matematica
    pergunta: "Falta scaffolding? A crianÃ§a precisa de mais tempo?"
    
  # Pontos relacionados a PEDAGOGIA
  falta_narracao:
    experts: [charlotte_mason, susan_macaulay]
    dominio: pedagogia
    pergunta: "Onde inserir momento de narraÃ§Ã£o pela crianÃ§a?"
    
  cpa_fora_ordem:
    experts: [jerome_bruner, charlotte_mason]
    dominio: matematica
    pergunta: "Como reorganizar para Câ†’Pâ†’A correto?"
    
  abstrato_demais:
    experts: [jerome_bruner, lev_vygotsky]
    dominio: matematica
    pergunta: "Como tornar mais concreto? Que manipulativos usar?"
    
  # Pontos relacionados a UX/FAMÃLIA
  preparacao_demorada:
    experts: [maes_personas, alex_hormozi]
    dominio: ux
    pergunta: "Como reduzir preparo para â‰¤5 min?"
    
  materiais_dificeis:
    experts: [maes_personas, seth_godin]
    dominio: ux
    pergunta: "Que materiais caseiros podem substituir?"
    
  linguagem_tecnica:
    experts: [maes_personas, susan_macaulay]
    dominio: ux
    pergunta: "Como traduzir para linguagem de mÃ£e?"
    
  # Pontos relacionados a INCLUSÃƒO
  exclui_bernardo:
    experts: [maes_personas, charlotte_mason]
    dominio: inclusao
    pergunta: "Como adaptar para crianÃ§as com necessidades especiais?"
    
  # Pontos relacionados a GUARDIÃƒO
  guardiao_inconsistente:
    experts: [jrr_tolkien, cs_lewis]
    dominio: narrativa
    pergunta: "A fala estÃ¡ alinhada com a personalidade canÃ´nica?"
    
  # Pontos relacionados a TÃ‰CNICO
  yaml_invalido:
    experts: [engenharia]
    dominio: tecnico
    pergunta: "Qual o erro de sintaxe? Como corrigir?"
    
  template_incompleto:
    experts: [engenharia, charlotte_mason]
    dominio: tecnico
    pergunta: "Que seÃ§Ãµes estÃ£o faltando no Template V4?"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# FASES DA REVISÃƒO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

fases:
  - fase: 1
    nome: "IDENTIFICAÃ‡ÃƒO"
    acao: |
      Maestro lista os pontos a revisar.
      Para cada ponto, identificar:
      - Experts relevantes (usar mapeamento)
      - DomÃ­nio do problema
      - Pergunta especÃ­fica
    output: "Lista de pontos com experts mapeados"
    
  - fase: 2
    nome: "CONSULTA"
    acao: |
      Para cada ponto:
      1. Invocar experts mapeados
      2. Apresentar o trecho problemÃ¡tico (do YAML fonte)
      3. Perguntar como corrigir
      4. Expert responde com:
         - DiagnÃ³stico (o que estÃ¡ errado)
         - SoluÃ§Ã£o (como corrigir)
         - Embasamento (citaÃ§Ã£o de fonte/princÃ­pio)
    output: "Pareceres embasados para cada ponto"
    
  - fase: 3
    nome: "CORREÃ‡ÃƒO NA FONTE"
    acao: |
      Aplicar correÃ§Ãµes no arquivo YAML fonte.
      Registrar cada correÃ§Ã£o com:
      - Antes (trecho original)
      - Depois (trecho corrigido)
      - Expert que recomendou
      - Embasamento usado
    nota: |
      IMPORTANTE: Corrigir apenas o YAML.
      O HTML e PDF serÃ£o gerados depois pelo Gutenberg.
    output: "YAML corrigido"
    
  - fase: 4
    nome: "REGENERAÃ‡ÃƒO"
    acao: |
      Executar Gutenberg para regerarHTML e PDF:
      ```
      python forja-core/pipeline/gutenberg_html.py --input [YAML] --output [HTML]
      python forja-core/pipeline/gutenberg_pdf.py --input [YAML] --output [PDF]
      ```
    output: "HTML e PDF atualizados"
    
  - fase: 5
    nome: "VALIDAÃ‡ÃƒO PÃ“S-CORREÃ‡ÃƒO"
    acao: |
      Verificar se as correÃ§Ãµes resolveram os pontos.
      Se ainda houver problemas, retornar Ã  Fase 2.
    output: "Pontos resolvidos âœ…"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# OUTPUT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

output:
  arquivo: "logs/{data}_REVISAO_PONTOS_{licao_id}.md"
  
  formato: |
    # ğŸ”§ REVISÃƒO DE PONTOS: {licao_id}
    
    **Data:** {data}
    **LiÃ§Ã£o:** {licao_id}
    **Pontos revisados:** {count_pontos}
    
    ---
    
    ## Ponto 1: {nome_ponto}
    
    **Experts consultados:** {lista_experts}
    
    **DiagnÃ³stico:**
    > {diagnÃ³stico}
    
    **SoluÃ§Ã£o:**
    > {soluÃ§Ã£o}
    
    **Embasamento:**
    > {citaÃ§Ã£o_fonte}
    
    **CorreÃ§Ã£o aplicada:**
    ```yaml
    # ANTES
    {antes}
    
    # DEPOIS
    {depois}
    ```
    
    ---
    
    [Repetir para cada ponto]
    
    ---
    
    ## ğŸ–ï¸ STATUS FINAL
    
    - YAML atualizado: âœ…
    - HTML regenerado: âœ…
    - PDF regenerado: âœ…
    - Todos os pontos resolvidos: âœ…
    
    ---
    
    *RevisÃ£o manual assistida em {data}*

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# EXEMPLOS DE USO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

exemplos:
  - input: "/revisar-pontos 'tom condescendente'"
    fluxo: |
      1. Identificar: ponto = tom_condescendente
      2. Experts: C.S. Lewis + Charlotte Mason
      3. Lewis pergunta: "Qual trecho infantiliza?"
      4. Lewis diagnostica: "Frase X usa 'vejam sÃ³, crianÃ§as'"
      5. Lewis sugere: "Reescrever como 'observe...'"
      6. Embasamento: "Never be within the child's mental range"
      7. CorreÃ§Ã£o aplicada no YAML
      8. Gutenberg regenera HTML/PDF
      
  - input: "/revisar-pontos 'tempo longo', 'materiais difÃ­ceis'"
    fluxo: |
      1. Ponto 1: tempo_longo â†’ CM + MÃ£es
      2. Ponto 2: materiais_dificeis â†’ MÃ£es + Godin
      3. Cada expert dÃ¡ parecer
      4. CorreÃ§Ãµes aplicadas no YAML
      5. Gutenberg regenera
