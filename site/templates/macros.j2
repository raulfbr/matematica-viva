{% macro scene_card(title, icon='', id='') %}
<div class="scene-card" {% if id %}id="{{ id }}"{% endif %}>
    {% if title %}
    <div class="scene-header">
        {% if icon %}<span class="scene-icon">{{ icon }}</span>{% endif %}
        {{ title }}
    </div>
    {% endif %}
    {{ caller() }}
</div>
{% endmacro %}

{% macro instruction_box(icon='üí°', content='') %}
<div class="instruction-box">
    <span class="instruction-icon">{{ icon }}</span>
    <div>
        {{ content | safe }}
        {{ caller() if caller else '' }}
    </div>
</div>
{% endmacro %}

{% macro script_persona(name, avatar, text, tone='', is_portador=False) %}
<div class="script-persona-block {{ 'portador-block' if is_portador else '' }}">
    <img src="../assets/cards/guardioes/{{ avatar }}" class="script-avatar" alt="{{ name }}">
    <div class="script-content">
        <div class="script-header">
            <span class="script-name">{{ name }}</span>
            {% if tone %}<span class="script-tone">({{ tone }})</span>{% endif %}
        </div>
        <div class="script-text">
            {{ text | replace('\n', '<br>') | safe }}
        </div>
    </div>
</div>
{% endmacro %}

{% macro nav_button(url, direction, label, title) %}
<a href="{{ url }}" class="nav-btn {{ direction }}">
    <span class="nav-label">{{ '‚Üê' if direction == 'prev' else '' }} {{ label }} {{ '‚Üí' if direction == 'next' else '' }}</span>
    <span class="nav-title">{{ title }}</span>
</a>
{% endmacro %}
